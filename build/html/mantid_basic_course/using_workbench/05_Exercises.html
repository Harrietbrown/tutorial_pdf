
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Exercises &#8212; Mantid Documentation 4.0.0 documentation</title>
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Introduction to Python" href="../../introduction_to_python/index.html" />
    <link rel="prev" title="What is missing from Workbench" href="04_What_is_missing.html" />

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-59110517-1', 'auto');
  ga('send', 'pageview');

</script>


  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="exercises">
<span id="id1"></span><h1>Exercises<a class="headerlink" href="#exercises" title="Permalink to this headline">¶</a></h1>
<p>It is possible to replicate plots you’ve made previously in MantidPlot entirly using python script in Workbench.
For all these exercises do not make any changes to the default imports given by the Workbench script editor.
You can execute the script after each step to make sure that there are no errors raised.</p>
<div class="section" id="part-1">
<h2>Part 1:<a class="headerlink" href="#part-1" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Load the File “GEM38370_Focussed_Legacy.nxs” using the algorithm: <code class="docutils literal notranslate"><span class="pre">GEM38370_Focussed_Legacy</span> <span class="pre">=</span> <span class="pre">Load(&quot;GEM38370_Focussed_Legacy&quot;)</span></code></p></li>
<li><p>Before plotting from workspaces you will need to set your subplot up with the Mantid projection so it can interpret them. To do this include:</p>
<p><code class="docutils literal notranslate"><span class="pre">fig,ax</span> <span class="pre">=</span> <span class="pre">plt.subplots(subplot_kw</span> <span class="pre">=</span> <span class="pre">{&quot;projection&quot;:</span> <span class="pre">&quot;mantid&quot;})</span></code></p>
<p>This will let you plot spectra from workspaces by including a spectrum number <code class="docutils literal notranslate"><span class="pre">specNum</span></code> or workspace index <code class="docutils literal notranslate"><span class="pre">wkspIndex</span></code> in the plot command.</p>
<p><code class="docutils literal notranslate"><span class="pre">ax.plot(RawData,</span> <span class="pre">specNum</span> <span class="pre">=</span> <span class="pre">2)</span></code> or <code class="docutils literal notranslate"><span class="pre">ax.plot(RawData,</span> <span class="pre">wkspIndex</span> <span class="pre">=</span> <span class="pre">3)</span></code></p>
</li>
<li><p>Plot the other spectra 3-7.</p>
<p>Now that the subplot is set up to plot spectra you can plot other curves in the same window using the same command with a different <code class="docutils literal notranslate"><span class="pre">specNum</span></code>
or <code class="docutils literal notranslate"><span class="pre">wkspIndex</span></code>, by modifying the script you have written already you can use a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop to plot all spectra in sequence.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">GEM38370_Focussed_Legacy</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>change the d-spacing axis range to 0-10 angstroms and set the x-axis to a logarithmic scale</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">ax</span></code> is a matplotlib subplot we can us the built-in matplotlib attributes to change the the axis range <code class="docutils literal notranslate"><span class="pre">ax.set_xlim([0.0,10.0])</span></code> and
scale <code class="docutils literal notranslate"><span class="pre">ax.set_xscale('symlog')</span></code>. You can then use the <code class="docutils literal notranslate"><span class="pre">fig.show()</span></code> function to show your plot</p>
</li>
</ol>
<p>By following these steps you should end up with code that looks something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The following line helps with future compatibility with Python 3</span>
<span class="c1"># print must now be used as a function, e.g print(&#39;Hello&#39;,&#39;World&#39;)</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>

<span class="c1"># import mantid algorithms, numpy and matplotlib</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">GEM38370_Focussed_Legacy</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s2">&quot;GEM38370_Focussed_Legacy&quot;</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;projection&quot;</span><span class="p">:</span> <span class="s2">&quot;mantid&quot;</span><span class="p">})</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">GEM38370_Focussed_Legacy</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="n">i</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlim</span><span class="p">([</span><span class="mf">0.0</span><span class="p">,</span><span class="mf">10.0</span><span class="p">])</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xscale</span><span class="p">(</span><span class="s1">&#39;symlog&#39;</span><span class="p">)</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>That will produce a figure looking like this:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/exerciseWorkbench_part_1_figure.png"><img alt="The resulting figure from part 1." src="../../_images/exerciseWorkbench_part_1_figure.png" style="width: 400px;" /></a>
</div>
</div>
<div class="section" id="part-2">
<h2>Part 2<a class="headerlink" href="#part-2" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p>Load the EventWorkspace HYS_11388_event.nxs</p></li>
<li><p>using the <code class="docutils literal notranslate"><span class="pre">SumSpectra()</span></code> algorithm sum across each spectra in the workspace, assigning the result to a new workspace <code class="docutils literal notranslate"><span class="pre">Sum</span></code></p></li>
<li><p>using the <code class="docutils literal notranslate"><span class="pre">Rebin()</span></code> algorithm rebin your new <code class="docutils literal notranslate"><span class="pre">Sum</span></code> workspace with bin width of 100 microseconds and events being preserved and assign it to another new workspace <code class="docutils literal notranslate"><span class="pre">binned</span></code>.</p>
<p><em>Hint: your</em> <code class="docutils literal notranslate"><span class="pre">Params</span></code> <em>should be set to 100 and</em> <code class="docutils literal notranslate"><span class="pre">PreserveEvents</span></code> <em>should equal</em> <code class="docutils literal notranslate"><span class="pre">True</span></code></p>
</li>
<li><p>plot the spectrum of <code class="docutils literal notranslate"><span class="pre">binned</span></code> in the same was the previous part.</p></li>
<li><p>Filter out events recored before 4000 microseconds using the <code class="docutils literal notranslate"><span class="pre">FilterByTime()</span></code> algorithm into a workspace called <code class="docutils literal notranslate"><span class="pre">FilteredByTime</span></code>, and plot <code class="docutils literal notranslate"><span class="pre">FilteredByTime</span></code> to the same figure.</p></li>
<li><p>Using the Matplotlib function add a legend to your plot <code class="docutils literal notranslate"><span class="pre">ax.legend()</span></code> and then show your figure.</p></li>
</ol>
<p>By following these steps you should end up with code that looks something like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># The following line helps with future compatibility with Python 3</span>
<span class="c1"># print must now be used as a function, e.g print(&#39;Hello&#39;,&#39;World&#39;)</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="p">(</span><span class="n">absolute_import</span><span class="p">,</span> <span class="n">division</span><span class="p">,</span> <span class="n">print_function</span><span class="p">,</span> <span class="n">unicode_literals</span><span class="p">)</span>

<span class="c1"># import mantid algorithms, numpy and matplotlib</span>
<span class="kn">from</span> <span class="nn">mantid.simpleapi</span> <span class="kn">import</span> <span class="o">*</span>

<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>

<span class="n">HYS_11388_event</span> <span class="o">=</span> <span class="n">Load</span><span class="p">(</span><span class="s2">&quot;HYS_11388_event&quot;</span><span class="p">)</span>
<span class="n">Sum</span> <span class="o">=</span> <span class="n">SumSpectra</span><span class="p">(</span><span class="n">HYS_11388_event</span><span class="p">)</span>
<span class="n">binned</span> <span class="o">=</span> <span class="n">Rebin</span><span class="p">(</span><span class="n">Sum</span><span class="p">,</span><span class="n">Params</span> <span class="o">=</span> <span class="mi">100</span><span class="p">,</span><span class="n">PreserveEvents</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">subplot_kw</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;projection&quot;</span><span class="p">:</span> <span class="s2">&quot;mantid&quot;</span><span class="p">})</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">binned</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">FilteredByTime</span> <span class="o">=</span> <span class="n">FilterByTime</span><span class="p">(</span><span class="n">binned</span><span class="p">,</span> <span class="n">StartTime</span> <span class="o">=</span> <span class="mi">4000</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">FilteredByTime</span><span class="p">,</span> <span class="n">wkspIndex</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
<span class="n">fig</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>That will produce a figure looking like this:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../../_images/exerciseWorkbench_part_2_figure.png"><img alt="The resulting figure from part 2." src="../../_images/exerciseWorkbench_part_2_figure.png" style="width: 400px;" /></a>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../../index.html">Mantid Documentation</a></h1>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">Mantid Basic Course</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started/getting_started.html">Setting Up and Getting Started</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms_workspaces_and_histories/index.html">Algorithms, Workspaces and Histories</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loading_and_displaying_data/index.html">Loading and Displaying Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../connecting_data_to_instruments/index.html">Connecting Data To Instruments</a></li>
<li class="toctree-l2"><a class="reference internal" href="../fitting_data/index.html">Fitting Data</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html">Mantid Workbench</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="01_opening_mantid_workbench.html">Opening Mantid Workbench</a></li>
<li class="toctree-l3"><a class="reference internal" href="02_plotting_in_workbench.html">Plotting in Workbench</a></li>
<li class="toctree-l3"><a class="reference internal" href="03_Working_with_Python_in_Workbench.html">Working with Python in Workbench</a></li>
<li class="toctree-l3"><a class="reference internal" href="04_What_is_missing.html">What is missing from Workbench</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Exercises</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../introduction_to_python/index.html">Introduction to Python</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../index.html">Mantid Basic Course</a><ul>
  <li><a href="index.html">Mantid Workbench</a><ul>
      <li>Previous: <a href="04_What_is_missing.html" title="previous chapter">What is missing from Workbench</a></li>
      <li>Next: <a href="../../introduction_to_python/index.html" title="next chapter">Introduction to Python</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<footer class="footer">
  <div class="container">
      <ul class="nav navbar-nav" style=" float: right;">
      
      
          <li><a href="#">Back to top</a></li>
       </ul>
    <p>
        &copy; Copyright 2019, Mantid.<br/>
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 2.0.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>